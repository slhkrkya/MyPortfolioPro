<!-- APP SHELL -->
<div class="relative min-h-screen bg-base-200 overflow-x-hidden">
  <!-- Hafif doku -->
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 z-0 opacity-[0.05] bg-noise"></div>

  <!-- Gradient bloblar -->
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 z-0 overflow-hidden">
    <div class="absolute -top-24 -left-24 h-[520px] w-[520px] rounded-full bg-primary/10 blur-3xl"></div>
    <div class="absolute -top-32 right-[-8rem] h-[460px] w-[460px] rounded-full bg-secondary/10 blur-3xl"></div>
    <div class="absolute bottom-[-10rem] left-1/2 -translate-x-1/2 h-[380px] w-[680px] rounded-[48%] bg-accent/10 blur-3xl"></div>
  </div>

  <!-- NAVBAR -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 border-b border-neutral-200">
    <div class="mx-auto max-w-6xl px-3 sm:px-4 h-14 flex items-center justify-between">
      <!-- Logo -->
      <a routerLink="/" class="text-lg font-extrabold tracking-tight text-neutral-900">MyPortfolio</a>

      <!-- Desktop menu -->
      <div class="hidden md:flex items-center gap-1">
        <a routerLink="/"
           [routerLinkActive]="['text-blue-700','font-semibold','bg-neutral-100','rounded-md']"
           [routerLinkActiveOptions]="{ exact: true }"
           class="px-3 py-2 text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100">Ana Sayfa</a>

        <a routerLink="/documents"
           [routerLinkActive]="['text-blue-700','font-semibold','bg-neutral-100','rounded-md']"
           class="px-3 py-2 text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100">Belgeler</a>

        <a routerLink="/projects"
           [routerLinkActive]="['text-blue-700','font-semibold','bg-neutral-100','rounded-md']"
           class="px-3 py-2 text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100">Projeler</a>

        <a routerLink="/contact"
           [routerLinkActive]="['text-blue-700','font-semibold','bg-neutral-100','rounded-md']"
           class="px-3 py-2 text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100">İletişim</a>

        <!-- Admin dropdown (desktop) -->
        <div *ngIf="auth.isAdmin()" class="dropdown dropdown-end">
          <label tabindex="0"
                 class="px-3 py-2 rounded-md cursor-pointer"
                 [ngClass]="isAdminActive()
                   ? 'bg-neutral-100 font-semibold text-blue-700'
                   : 'text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100'">
            Admin
          </label>
          <ul tabindex="0"
              class="dropdown-content z-[60] menu p-2 shadow bg-white rounded-box w-56 border border-neutral-200">
            <li><a routerLink="/admin/panel"        routerLinkActive="active font-semibold text-blue-700">Admin Panel</a></li>
            <li><a routerLink="/admin/project-form" routerLinkActive="active font-semibold text-blue-700">Proje Ekle</a></li>
            <li><a routerLink="/admin/cv-upload"    routerLinkActive="active font-semibold text-blue-700">Belge Yükle</a></li>
            <li><a routerLink="/admin/profile"      routerLinkActive="active font-semibold text-blue-700">Profil Düzenle</a></li>
          </ul>
        </div>
      </div>

      <!-- Sağ: Tema + Auth (desktop) -->
      <div class="hidden md:flex items-center gap-2">
        <a *ngIf="!auth.isLoggedIn()" routerLink="/admin/login" class="btn btn-sm btn-outline">Giriş</a>
        <button *ngIf="auth.isLoggedIn()" (click)="logout()" class="btn btn-sm btn-outline btn-error">Çıkış</button>
      </div>

      <!-- Mobile burger -->
      <button class="md:hidden btn btn-ghost btn-sm" (click)="mobileOpen = true" aria-label="Menüyü aç">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </nav>

  <!-- MOBILE SHEET -->
  <div class="md:hidden" *ngIf="mobileOpen">
    <div class="fixed inset-0 z-50 bg-black/40" (click)="mobileOpen=false"></div>

    <div class="fixed top-0 right-0 bottom-0 z-50 w-72 bg-white shadow-xl p-3 flex flex-col" (keydown.escape)="mobileOpen=false">
      <div class="flex items-center justify-between px-1 py-2">
        <span class="font-bold">Menü</span>
        <button class="btn btn-ghost btn-sm" (click)="mobileOpen=false" aria-label="Kapat">✕</button>
      </div>

      <nav class="mt-2 flex flex-col">
        <a routerLink="/"
           [routerLinkActive]="['text-blue-700','font-semibold']"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="mobileOpen=false"
           class="px-3 py-2 rounded hover:bg-neutral-100">Ana Sayfa</a>

        <a routerLink="/documents"
           [routerLinkActive]="['text-blue-700','font-semibold']"
           (click)="mobileOpen=false"
           class="px-3 py-2 rounded hover:bg-neutral-100">Belgeler</a>

        <a routerLink="/projects"
           [routerLinkActive]="['text-blue-700','font-semibold']"
           (click)="mobileOpen=false"
           class="px-3 py-2 rounded hover:bg-neutral-100">Projeler</a>

        <a routerLink="/contact"
           [routerLinkActive]="['text-blue-700','font-semibold']"
           (click)="mobileOpen=false"
           class="px-3 py-2 rounded hover:bg-neutral-100">İletişim</a>

        <ng-container *ngIf="auth.isAdmin()">
          <div class="my-2 border-t border-neutral-200"></div>
          <a routerLink="/admin/panel"        (click)="mobileOpen=false" [routerLinkActive]="['text-blue-700','font-semibold']" class="px-3 py-2 rounded hover:bg-neutral-100">Admin Panel</a>
          <a routerLink="/admin/project-form" (click)="mobileOpen=false" [routerLinkActive]="['text-blue-700','font-semibold']" class="px-3 py-2 rounded hover:bg-neutral-100">Proje Ekle</a>
          <a routerLink="/admin/cv-upload"    (click)="mobileOpen=false" [routerLinkActive]="['text-blue-700','font-semibold']" class="px-3 py-2 rounded hover:bg-neutral-100">Belge Yükle</a>
          <a routerLink="/admin/profile"      (click)="mobileOpen=false" [routerLinkActive]="['text-blue-700','font-semibold']" class="px-3 py-2 rounded hover:bg-neutral-100">Profil Düzenle</a>
        </ng-container>

        <!-- Tema toggle (mobil) -->

        <div class="mt-auto pt-2">
          <ng-container *ngIf="!auth.isLoggedIn(); else logged">
            <a routerLink="/admin/login" (click)="mobileOpen=false" class="btn btn-primary w-full">Giriş</a>
          </ng-container>
          <ng-template #logged>
            <button (click)="mobileOpen=false; logout()" class="btn btn-outline btn-error w-full">Çıkış</button>
          </ng-template>
        </div>
      </nav>
    </div>
  </div>

  <!-- CONTENT -->
  <main class="relative z-10 pt-14 md:pt-16 pb-24 md:pb-28 lg:pb-32">
    <p-toast
      position="top-right"
      appendTo="body"
      [baseZIndex]="9999"
      [preventOpenDuplicates]="true"
      [style]="{ top: '72px' }" 
    ></p-toast>
    <router-outlet></router-outlet>
  </main>
</div>