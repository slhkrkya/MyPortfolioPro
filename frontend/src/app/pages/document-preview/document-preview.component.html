<div class="max-w-6xl mx-auto mt-10 p-4">

  <!-- Başlık -->
  <section class="soft-card comic-outline surface-2 p-5 mb-6 flex flex-wrap items-center justify-between gap-4">
    <div>
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight heading-gradient">
        Belge Önizleme
      </h1>
      <div class="mt-2 h-px w-full"
          style="background-image:linear-gradient(90deg,hsl(var(--a)/0),hsl(var(--a)/.35),hsl(var(--a)/0));">
      </div>
    </div>

    <!-- Premium Butonlar -->
    <div class="flex items-center gap-2">

      <!-- Geri -->
      <button class="flex items-center gap-2 btn btn-sm rounded-full shadow-sm transition-all hover:shadow-md border-0 px-4"
              style="background:linear-gradient(135deg,hsl(var(--b3)),hsl(var(--b2)));color:hsl(var(--bc));"
              (click)="back()">
        <i class="pi pi-arrow-left text-sm"></i> Geri
      </button>

      <!-- Yeni Sekme -->
      <button class="flex items-center gap-2 btn btn-sm rounded-full shadow-sm transition-all hover:shadow-md border px-4"
              style="border-color:hsl(var(--s));color:hsl(var(--s));"
              (click)="openNewTab()" [disabled]="!safeUrl">
        <i class="pi pi-external-link text-sm"></i> Yeni Sekme
      </button>

      <!-- İndir -->
      <button class="flex items-center gap-2 btn btn-sm rounded-full shadow-sm transition-all hover:shadow-md px-4"
              style="background:linear-gradient(135deg,hsl(var(--p)),hsl(var(--s)));color:hsl(var(--pc));"
              (click)="download()" [disabled]="!safeUrl">
        <i class="pi pi-download text-sm"></i> İndir
      </button>

    </div>
  </section>

  <!-- Loading skeleton -->
  <div *ngIf="loading" class="animate-pulse space-y-4">
    <div class="h-5 w-56 rounded" style="background-color:hsl(var(--b3)/.35)"></div>
    <div class="h-96 w-full rounded" style="background-color:hsl(var(--b3)/.35)"></div>
  </div>

  <!-- Hata -->
  <div *ngIf="!loading && error"
       class="comic-outline px-4 py-3 rounded-lg"
       style="background-color:hsl(var(--er)/.12);color:hsl(var(--er));border:1px solid hsl(var(--er)/.35);">
    {{ error }}
  </div>

  <!-- İçerik -->
  <div *ngIf="!loading && !error">
    <div class="mb-3 flex flex-wrap items-center gap-2 muted">
      <span class="font-medium">Dosya:</span>
      <span class="badge badge-outline"
            style="border-color:hsl(var(--a));color:hsl(var(--a));">
        {{ fileName || 'Bilinmiyor' }}
      </span>
    </div>

    <!-- PDF -->
    <div *ngIf="isPdf()" class="soft-card comic-outline overflow-hidden h-[80vh] surface-1">
      <iframe [src]="safeUrl" class="w-full h-full" title="PDF Preview"></iframe>
    </div>

    <!-- Resim -->
    <div *ngIf="!isPdf() && isImage()" class="soft-card comic-outline overflow-hidden surface-1">
      <img [src]="safeUrl!" [alt]="fileName" class="max-w-full mx-auto" />
    </div>

    <!-- Diğer türler -->
    <div *ngIf="!isPdf() && !isImage()"
         class="soft-card comic-outline surface-2 p-6 text-center">
      <p class="mb-3">Bu dosya türü tarayıcıda önizlenemiyor.</p>
      <button class="btn border-0 btn-primary-solid"
              style="background-color:hsl(var(--p));color:hsl(var(--pc));"
              (click)="download()" [disabled]="!safeUrl">
        İndir ({{ fileName || 'dosya' }})
      </button>
    </div>
  </div>
</div>
