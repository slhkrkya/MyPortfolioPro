<section class="body-font">
  <div class="container px-5 py-16 mx-auto max-w-3xl">

    <!-- Başlık -->
    <div class="soft-card comic-outline p-6 surface-2 mb-8 text-center">
      <h1 class="text-3xl font-extrabold mb-2"
          style="background-image:linear-gradient(90deg,hsl(var(--p)),hsl(var(--s)));
                 -webkit-background-clip:text;background-clip:text;color:transparent;">
        Bana Ulaşın
      </h1>
      <p class="muted">Bana ulaşmak ve konuşmak istediğiniz her türlü konu için.</p>

      <div class="mt-4 h-px w-full"
           style="background-image:linear-gradient(90deg,hsl(var(--a)/0),hsl(var(--a)/.35),hsl(var(--a)/0));">
      </div>
    </div>

    <!-- Üst uyarılar -->
    <div *ngIf="cooldownLeftSec > 0"
         class="mb-4 px-4 py-3 rounded-lg comic-outline"
         style="background-color:hsl(var(--in)/.12); color:hsl(var(--in)); border:1px solid hsl(var(--in)/.35);">
      <span class="font-medium">Bekleyin:</span>
      <span class="ml-1">Tekrar göndermek için <b>{{ cooldownLeftSec }}</b> saniye kaldı.</span>
    </div>

    <div *ngIf="justSent"
         class="mb-4 px-4 py-3 rounded-lg comic-outline"
         style="background-color:hsl(var(--su)/.12); color:hsl(var(--su)); border:1px solid hsl(var(--su)/.35);">
      <span class="font-medium">Mesaj gönderildi!</span>
      <span class="ml-1">En kısa sürede dönüş yapılacaktır.</span>
    </div>

    <div *ngIf="form.touched && form.invalid"
         class="mb-4 px-4 py-3 rounded-lg comic-outline"
         style="background-color:hsl(var(--wa)/.12); color:hsl(var(--wa)); border:1px dashed hsl(var(--wa)/.45);">
      <span class="font-medium">Eksik/Geçersiz alanlar var.</span>
      <span class="ml-1">Lütfen formu kontrol edin.</span>
    </div>

    <!-- Form -->
    <form class="soft-card comic-outline p-6 md:p-8 surface-1"
          (ngSubmit)="submit()" [formGroup]="form" novalidate>

      <!-- Honeypot -->
      <input type="text" formControlName="honeypot" class="hidden" tabindex="-1" autocomplete="off" aria-hidden="true"/>

      <!-- Name -->
      <div class="mb-6">
        <label for="name" class="label-soft block text-sm mb-1">Ad Soyad</label>
        <div class="relative">
          <i class="pi pi-user absolute left-3 top-1/2 -translate-y-1/2" style="color:hsl(var(--s));opacity:.85"></i>
          <input id="name" type="text" formControlName="name" required autocomplete="name"
                 [attr.aria-invalid]="form.get('name')?.touched && form.get('name')?.invalid"
                 class="input-soft pl-10"
                 [class.border-red-500]="form.get('name')?.touched && form.get('name')?.invalid"
                 placeholder="Ad Soyad">
        </div>
        <p class="mt-1 text-xs muted">Adınız-soyadınız.</p>
        <div class="mt-1 text-sm" role="alert" *ngIf="form.get('name')?.touched && form.get('name')?.invalid"
             style="color:hsl(var(--er));">
          <span *ngIf="form.get('name')?.errors?.['required']">Bu alan zorunludur.</span>
          <span *ngIf="form.get('name')?.errors?.['maxlength']">Çok uzun (maks. 100).</span>
        </div>
      </div>

      <!-- Email -->
      <div class="mb-6">
        <label for="email" class="label-soft block text-sm mb-1">E-posta</label>
        <div class="relative">
          <i class="pi pi-envelope absolute left-3 top-1/2 -translate-y-1/2" style="opacity:.75"></i>
          <input id="email" type="email" formControlName="email" required inputmode="email" autocomplete="email"
                 [attr.aria-invalid]="form.get('email')?.touched && form.get('email')?.invalid"
                 class="input-soft pl-10"
                 [class.border-red-500]="form.get('email')?.touched && form.get('email')?.invalid"
                 placeholder="mail@domain.com">
        </div>
        <p class="mt-1 text-xs muted">Geri dönüş için kullanılacak adres.</p>
        <div class="mt-1 text-sm" role="alert" *ngIf="form.get('email')?.touched && form.get('email')?.invalid"
             style="color:hsl(var(--er));">
          <span *ngIf="form.get('email')?.errors?.['required']">Bu alan zorunludur.</span>
          <span *ngIf="form.get('email')?.errors?.['email']">Geçerli bir e-posta giriniz.</span>
          <span *ngIf="form.get('email')?.errors?.['maxlength']">Çok uzun (maks. 150).</span>
        </div>
      </div>

      <!-- Phone (optional) -->
      <div class="mb-6">
        <label for="phone" class="label-soft block text-sm mb-1">Telefon (opsiyonel)</label>
        <div class="relative">
          <i class="pi pi-phone absolute left-3 top-1/2 -translate-y-1/2" style="color:hsl(var(--a));opacity:.9"></i>
          <input id="phone" type="tel" formControlName="phone" inputmode="tel" autocomplete="tel"
                 class="input-soft pl-10"
                 [class.border-red-500]="form.get('phone')?.touched && form.get('phone')?.invalid"
                 placeholder="+90 5XX XXX XX XX">
        </div>
        <p class="mt-1 text-xs muted">İsterseniz telefonunuzu bırakabilirsiniz; zorunlu değil.</p>
        <div class="mt-1 text-sm" role="alert" *ngIf="form.get('phone')?.touched && form.get('phone')?.invalid"
             style="color:hsl(var(--er));">
          <span *ngIf="form.get('phone')?.errors?.['maxlength']">Çok uzun (maks. 20).</span>
          <span *ngIf="form.get('phone')?.errors?.['pattern']">Telefon formatı geçersiz.</span>
        </div>
      </div>

      <!-- Message -->
      <div class="mb-6">
        <label for="message" class="label-soft block text-sm mb-1">Mesaj</label>
        <textarea id="message" rows="6" formControlName="message" required
                  class="input-soft resize-y"
                  [class.border-red-500]="form.get('message')?.touched && form.get('message')?.invalid"
                  placeholder="Mesajınızı yazın..."></textarea>

        <div class="mt-1 flex items-center justify-between">
          <div class="text-sm" role="alert" *ngIf="form.get('message')?.touched && form.get('message')?.invalid"
               style="color:hsl(var(--er));">
            <span *ngIf="form.get('message')?.errors?.['required']">Bu alan zorunludur.</span>
            <span *ngIf="form.get('message')?.errors?.['minlength']">En az 10 karakter olmalı.</span>
            <span *ngIf="form.get('message')?.errors?.['maxlength']">Çok uzun (maks. 4000).</span>
          </div>
          <div class="text-xs muted">
            {{ (form.get('message')?.value?.length || 0) }}/4000
          </div>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit"
              [disabled]="loading || form.invalid || cooldownLeftSec > 0"
              class="w-full btn border-0 btn-primary-solid"
              style="background-image:linear-gradient(90deg,hsl(var(--p)),hsl(var(--s))); color:hsl(var(--pc));">
        <ng-container *ngIf="!loading && cooldownLeftSec === 0; else waitTpl">
          <i class="pi pi-send mr-2"></i>Gönder
        </ng-container>
      </button>
      <ng-template #waitTpl>
        {{ loading ? 'Gönderiliyor…' : ('Bekleyin… ' + cooldownLeftSec + ' sn') }}
      </ng-template>

      <p class="mt-3 text-center text-xs muted">En kısa zamanda tarafınıza dönüş yapılacaktır.</p>
    </form>

    <!-- Divider -->
    <hr class="mt-10 mb-6" style="border-color:hsl(var(--b3));">

    <!-- Contact info + social -->
    <div class="text-center space-y-4">
      <a href="mailto:slhkrkyh@gmail.com"
         class="font-medium break-all"
         style="color:hsl(var(--p));">
        slhkrkyh@gmail.com
      </a>

      <div class="flex items-center justify-center gap-6 pt-2">
        <!-- Instagram (accent) -->
        <a href="https://instagram.com/slhkrkya" target="_blank" rel="noopener"
           class="transition" aria-label="Instagram"
           style="color:hsl(var(--a));">
          <i class="pi pi-instagram text-xl"></i>
        </a>

        <!-- LinkedIn (secondary) -->
        <a href="https://www.linkedin.com/in/salih-karakaya-a43818299/" target="_blank" rel="noopener"
           class="transition" aria-label="LinkedIn"
           style="color:hsl(var(--s));">
          <i class="pi pi-linkedin text-xl"></i>
        </a>

        <!-- GitHub (nötr) -->
        <a href="https://github.com/slhkrkya" target="_blank" rel="noopener"
           class="transition" aria-label="GitHub"
           style="color:hsl(var(--bc)/.8);">
          <i class="pi pi-github text-xl"></i>
        </a>

        <!-- WhatsApp (success) -->
        <a href="https://wa.me/905369749036?text=Merhaba%2C%20portfolyonuzdan%20ula%C5%9F%C4%B1yorum."
           target="_blank" rel="noopener"
           class="transition" aria-label="WhatsApp"
           style="color:hsl(var(--su));">
          <i class="pi pi-whatsapp text-xl"></i>
        </a>
      </div>
    </div>
  </div>
</section>